{"ast":null,"code":"var _jsxFileName = \"D:\\\\react project\\\\newsapp\\\\src\\\\components\\\\News.js\";\nimport React, { Component } from 'react';\nimport NewsItem from './NewsItem';\nimport Loading from './Loading';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class News extends Component {\n  constructor() {\n    super();\n    // Function to fetch news data based on the current country, category, and page\n    this.fetchNews = async () => {\n      const {\n        country,\n        category,\n        pageSize\n      } = this.props;\n      const {\n        page\n      } = this.state;\n      this.setState({\n        loading: true\n      });\n\n      // Correct URL construction with proper parameters\n      const url = `https://newsapi.org/v2/top-headlines?country=${country}&category=${category}&apiKey=5cef0d8d47b140d4ae6a5fdc378af54f&page=${page}&pageSize=${pageSize}`;\n      try {\n        let data = await fetch(url);\n        let parsedData = await data.json();\n        console.log('API Response:', parsedData); // Log the full API response\n\n        if (parsedData.status === 'ok') {\n          // Check if articles exist\n          if (parsedData.articles && parsedData.articles.length > 0) {\n            this.setState({\n              articles: parsedData.articles,\n              totalResults: parsedData.totalResults,\n              loading: false\n            });\n          } else {\n            // If no articles returned, log a warning\n            console.warn('No articles found for the given country/category.');\n            this.setState({\n              articles: [],\n              loading: false\n            });\n          }\n        } else {\n          console.error('API Error:', parsedData.message);\n          this.setState({\n            loading: false\n          });\n        }\n      } catch (error) {\n        console.error('Error fetching news:', error);\n        this.setState({\n          loading: false\n        });\n      }\n    };\n    this.handlenextclick = async () => {\n      const {\n        page,\n        totalResults\n      } = this.state;\n      const {\n        pageSize\n      } = this.props;\n      if (page + 1 <= Math.ceil(totalResults / pageSize)) {\n        this.setState({\n          page: page + 1\n        }, this.fetchNews); // Increment page and fetch news again\n      }\n    };\n    this.handleprevclick = async () => {\n      const {\n        page\n      } = this.state;\n      if (page > 1) {\n        this.setState({\n          page: page - 1\n        }, this.fetchNews); // Decrement page and fetch news again\n      }\n    };\n    this.state = {\n      articles: [],\n      loading: false,\n      page: 1,\n      totalResults: 0\n    };\n  }\n  async componentDidMount() {\n    this.fetchNews(); // Fetch news initially\n  }\n\n  render() {\n    const {\n      articles,\n      loading,\n      page,\n      totalResults\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"News Headline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: !loading && articles.length > 0 ? articles.map(element => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: /*#__PURE__*/_jsxDEV(NewsItem, {\n              title: element.title ? element.title.slice(0, 45) : '',\n              description: element.description ? element.description.slice(0, 88) : '',\n              imageUrl: element.urlToImage,\n              newsUrl: element.url,\n              author: element.author,\n              publishedAt: element.publishedAt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 19\n            }, this)\n          }, element.url, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this);\n        }) : !loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No news available for the selected country/category.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: page <= 1,\n          type: \"button\",\n          className: \"btn btn-dark\",\n          onClick: this.handleprevclick,\n          children: \"\\u2190 Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: page + 1 > Math.ceil(totalResults / this.props.pageSize),\n          type: \"button\",\n          className: \"btn btn-dark\",\n          onClick: this.handlenextclick,\n          children: \"Next \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n}\nNews.defaultProps = {\n  country: 'in',\n  pageSize: 6,\n  category: 'general'\n};\nNews.propTypes = {\n  country: PropTypes.string,\n  pageSize: PropTypes.number,\n  category: PropTypes.string\n};\nexport default News;","map":{"version":3,"names":["React","Component","NewsItem","Loading","PropTypes","jsxDEV","_jsxDEV","News","constructor","fetchNews","country","category","pageSize","props","page","state","setState","loading","url","data","fetch","parsedData","json","console","log","status","articles","length","totalResults","warn","error","message","handlenextclick","Math","ceil","handleprevclick","componentDidMount","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","element","title","slice","description","imageUrl","urlToImage","newsUrl","author","publishedAt","disabled","type","onClick","defaultProps","propTypes","string","number"],"sources":["D:/react project/newsapp/src/components/News.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport NewsItem from './NewsItem';\r\nimport Loading from './Loading';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    country: 'in',\r\n    pageSize: 6,\r\n    category: 'general'\r\n  };\r\n\r\n  static propTypes = {\r\n    country: PropTypes.string,\r\n    pageSize: PropTypes.number,\r\n    category: PropTypes.string,\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      articles: [],\r\n      loading: false,\r\n      page: 1,\r\n      totalResults: 0,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.fetchNews(); // Fetch news initially\r\n  }\r\n\r\n  // Function to fetch news data based on the current country, category, and page\r\n  fetchNews = async () => {\r\n    const { country, category, pageSize } = this.props;\r\n    const { page } = this.state;\r\n  \r\n    this.setState({ loading: true });\r\n  \r\n    // Correct URL construction with proper parameters\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${country}&category=${category}&apiKey=5cef0d8d47b140d4ae6a5fdc378af54f&page=${page}&pageSize=${pageSize}`;\r\n  \r\n    try {\r\n      let data = await fetch(url);\r\n      let parsedData = await data.json();\r\n  \r\n      console.log('API Response:', parsedData); // Log the full API response\r\n  \r\n      if (parsedData.status === 'ok') {\r\n        // Check if articles exist\r\n        if (parsedData.articles && parsedData.articles.length > 0) {\r\n          this.setState({\r\n            articles: parsedData.articles,\r\n            totalResults: parsedData.totalResults,\r\n            loading: false,\r\n          });\r\n        } else {\r\n          // If no articles returned, log a warning\r\n          console.warn('No articles found for the given country/category.');\r\n          this.setState({\r\n            articles: [],\r\n            loading: false,\r\n          });\r\n        }\r\n      } else {\r\n        console.error('API Error:', parsedData.message);\r\n        this.setState({ loading: false });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching news:', error);\r\n      this.setState({ loading: false });\r\n    }\r\n  };\r\n  \r\n\r\n  handlenextclick = async () => {\r\n    const { page, totalResults } = this.state;\r\n    const { pageSize } = this.props;\r\n\r\n    if (page + 1 <= Math.ceil(totalResults / pageSize)) {\r\n      this.setState({ page: page + 1 }, this.fetchNews); // Increment page and fetch news again\r\n    }\r\n  };\r\n\r\n  handleprevclick = async () => {\r\n    const { page } = this.state;\r\n    if (page > 1) {\r\n      this.setState({ page: page - 1 }, this.fetchNews); // Decrement page and fetch news again\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { articles, loading, page, totalResults } = this.state;\r\n\r\n    return (\r\n      <div className=\"container my-3\">\r\n        <h2>News Headline</h2>\r\n        {loading && <Loading />}\r\n        <div className=\"row\">\r\n          {!loading && articles.length > 0 ? (\r\n            articles.map((element) => {\r\n              return (\r\n                <div className=\"col-md-4\" key={element.url}>\r\n                  <NewsItem\r\n                    title={element.title ? element.title.slice(0, 45) : ''}\r\n                    description={element.description ? element.description.slice(0, 88) : ''}\r\n                    imageUrl={element.urlToImage}\r\n                    newsUrl={element.url}\r\n                    author={element.author}\r\n                    publishedAt={element.publishedAt}\r\n                  />\r\n                </div>\r\n              );\r\n            })\r\n          ) : (\r\n            !loading && <p>No news available for the selected country/category.</p>\r\n          )}\r\n        </div>\r\n        <div className=\"container d-flex justify-content-between\">\r\n          <button\r\n            disabled={page <= 1}\r\n            type=\"button\"\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handleprevclick}\r\n          >\r\n            &larr; Previous\r\n          </button>\r\n          <button\r\n            disabled={page + 1 > Math.ceil(totalResults / this.props.pageSize)}\r\n            type=\"button\"\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handlenextclick}\r\n          >\r\n            Next &rarr;\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default News;\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}