{"ast":null,"code":"import React,{Component}from'react';import NewsItem from'./NewsItem';import Loading from'./Loading';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export class News extends Component{constructor(props){super(props);this.handleNextClick=()=>{if(this.state.page+1<=Math.ceil(this.state.totalResults/this.props.pageSize)){this.setState(prevState=>({page:prevState.page+1}),this.fetchNews);}};this.handlePrevClick=()=>{if(this.state.page>1){this.setState(prevState=>({page:prevState.page-1}),this.fetchNews);}};this.state={articles:[],loading:false,page:1,totalResults:0};}async fetchNews(){const{country,category,pageSize}=this.props;const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(country,\"&category=\").concat(category,\"&apiKey=2b1437ddc8b74418ae71aa7deb0c7dd5&page=\").concat(this.state.page,\"&pageSize=\").concat(pageSize);this.setState({loading:true});try{const response=await fetch(url);const data=await response.json();if(data.articles){this.setState({articles:data.articles,totalResults:data.totalResults,loading:false});}else{console.error(\"No articles found:\",data);this.setState({loading:false,articles:[]});}}catch(error){console.error('Error fetching news:',error);this.setState({loading:false,articles:[]});}}async componentDidMount(){this.fetchNews();}async componentDidUpdate(prevProps){if(prevProps.country!==this.props.country||prevProps.category!==this.props.category){this.setState({page:1});this.fetchNews();}}render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"News Headlines\"}),this.state.loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:!this.state.loading&&this.state.articles.length>0?this.state.articles.map(article=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:article.title?article.title.slice(0,45):'',description:article.description?article.description.slice(0,88):'',imageUrl:article.urlToImage,newsUrl:article.url,author:article.author,publishedAt:article.publishedAt})},article.url)):/*#__PURE__*/_jsx(\"p\",{children:\"No news available for the selected country/category.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:this.state.page<=1,type:\"button\",className:\"btn btn-dark\",onClick:this.handlePrevClick,children:\"\\u2190 Previous\"}),/*#__PURE__*/_jsx(\"button\",{disabled:this.state.page+1>Math.ceil(this.state.totalResults/this.props.pageSize),type:\"button\",className:\"btn btn-dark\",onClick:this.handleNextClick,children:\"Next \\u2192\"})]})]});}}News.defaultProps={country:'us',pageSize:6,category:'general'};export default News;","map":{"version":3,"names":["React","Component","NewsItem","Loading","jsx","_jsx","jsxs","_jsxs","News","constructor","props","handleNextClick","state","page","Math","ceil","totalResults","pageSize","setState","prevState","fetchNews","handlePrevClick","articles","loading","country","category","url","concat","response","fetch","data","json","console","error","componentDidMount","componentDidUpdate","prevProps","render","className","children","length","map","article","title","slice","description","imageUrl","urlToImage","newsUrl","author","publishedAt","disabled","type","onClick","defaultProps"],"sources":["D:/react project/newsapp/src/components/News.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport NewsItem from './NewsItem';\r\nimport Loading from './Loading';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    country: 'us', \r\n    pageSize: 6,\r\n    category: 'general',\r\n  };\r\n\r\n  static propTypes = {\r\n    country: PropTypes.string,\r\n    pageSize: PropTypes.number,\r\n    category: PropTypes.string,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      articles: [],\r\n      loading: false,\r\n      page: 1,\r\n      totalResults: 0,\r\n    };\r\n  }\r\n\r\n  async fetchNews() {\r\n    const { country, category, pageSize } = this.props;\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${country}&category=${category}&apiKey=2b1437ddc8b74418ae71aa7deb0c7dd5&page=${this.state.page}&pageSize=${pageSize}`;\r\n    \r\n    this.setState({ loading: true });\r\n    try {\r\n      const response = await fetch(url);\r\n      const data = await response.json();\r\n      if (data.articles) {\r\n        this.setState({\r\n          articles: data.articles,\r\n          totalResults: data.totalResults,\r\n          loading: false,\r\n        });\r\n      } else {\r\n        console.error(\"No articles found:\", data);\r\n        this.setState({ loading: false, articles: [] });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching news:', error);\r\n      this.setState({ loading: false, articles: [] });\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.fetchNews();\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.country !== this.props.country || prevProps.category !== this.props.category) {\r\n      this.setState({ page: 1 }); \r\n      this.fetchNews();\r\n    }\r\n  }\r\n\r\n  handleNextClick = () => {\r\n    if (this.state.page + 1 <= Math.ceil(this.state.totalResults / this.props.pageSize)) {\r\n      this.setState((prevState) => ({ page: prevState.page + 1 }), this.fetchNews);\r\n    }\r\n  };\r\n\r\n  handlePrevClick = () => {\r\n    if (this.state.page > 1) {\r\n      this.setState((prevState) => ({ page: prevState.page - 1 }), this.fetchNews);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container my-3\">\r\n        <h2>News Headlines</h2>\r\n        {this.state.loading && <Loading />}\r\n        <div className=\"row\">\r\n          {!this.state.loading && this.state.articles.length > 0 ? (\r\n            this.state.articles.map((article) => (\r\n              <div className=\"col-md-4\" key={article.url}>\r\n                <NewsItem\r\n                  title={article.title ? article.title.slice(0, 45) : ''}\r\n                  description={article.description ? article.description.slice(0, 88) : ''}\r\n                  imageUrl={article.urlToImage}\r\n                  newsUrl={article.url}\r\n                  author={article.author}\r\n                  publishedAt={article.publishedAt}\r\n                />\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>No news available for the selected country/category.</p>\r\n          )}\r\n        </div>\r\n        <div className=\"container d-flex justify-content-between\">\r\n          <button\r\n            disabled={this.state.page <= 1}\r\n            type=\"button\"\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handlePrevClick}\r\n          >\r\n            &larr; Previous\r\n          </button>\r\n          <button\r\n            disabled={this.state.page + 1 > Math.ceil(this.state.totalResults / this.props.pageSize)}\r\n            type=\"button\"\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handleNextClick}\r\n          >\r\n            Next &rarr;\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default News;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}